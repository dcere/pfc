<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: CommonFunctions</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">CommonFunctions</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/common_functions_rb.html">
                lib/common_functions.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
A helper module that aggregates functions that are not part of
Neptune&#8216;s core functionality. Specifically, this module contains
methods to scp files to other machines and the ability to read YAML files,
which are often needed to determine which machine should be used for
computation or to copy over code and input files.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000017">get_from_yaml</a>&nbsp;&nbsp;
      <a href="#M000018">get_secret_key</a>&nbsp;&nbsp;
      <a href="#M000016">scp_file</a>&nbsp;&nbsp;
      <a href="#M000015">scp_to_shadow</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000017" class="method-detail">
        <a name="M000017"></a>

        <div class="method-heading">
          <a href="CommonFunctions.src/M000017.html" target="Code" class="method-signature"
            onclick="popupCode('CommonFunctions.src/M000017.html');return false;">
          <span class="method-name">get_from_yaml</span><span class="method-args">(keyname, tag, required=true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Given the AppScale keyname, reads the associated YAML file and returns the
contents of the given tag. The required flag (default value is true)
indicates whether a value must exist for this tag: if set to true, this
method aborts if the value doesn&#8216;t exist or the YAML file is
malformed. If the required flag is set to false, it returns nil in either
scenario instead.
</p>
        </div>
      </div>

      <div id="method-M000018" class="method-detail">
        <a name="M000018"></a>

        <div class="method-heading">
          <a href="CommonFunctions.src/M000018.html" target="Code" class="method-signature"
            onclick="popupCode('CommonFunctions.src/M000018.html');return false;">
          <span class="method-name">get_secret_key</span><span class="method-args">(keyname, required=true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the secret key needed for communication with AppScale&#8216;s
Shadow node. This method is a nice frontend to the <a
href="CommonFunctions.html#M000017">get_from_yaml</a> function, as the
secret is stored in a YAML file.
</p>
        </div>
      </div>

      <div id="method-M000016" class="method-detail">
        <a name="M000016"></a>

        <div class="method-heading">
          <a href="CommonFunctions.src/M000016.html" target="Code" class="method-signature"
            onclick="popupCode('CommonFunctions.src/M000016.html');return false;">
          <span class="method-name">scp_file</span><span class="method-args">(local_file_loc, remote_file_loc, target_ip, public_key_loc, is_dir=false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Performs the actual remote copying of files: given the IP address and other
information from <a href="CommonFunctions.html#M000015">scp_to_shadow</a>,
attempts to use scp to copy the file over. Aborts if the scp fails, which
can occur if the network is down, if a bad keyname is provided, or if the
wrong IP is given. If the user specifies that the file to copy is actually
a directory, we append the -r flag to scp as well.
</p>
        </div>
      </div>

      <div id="method-M000015" class="method-detail">
        <a name="M000015"></a>

        <div class="method-heading">
          <a href="CommonFunctions.src/M000015.html" target="Code" class="method-signature"
            onclick="popupCode('CommonFunctions.src/M000015.html');return false;">
          <span class="method-name">scp_to_shadow</span><span class="method-args">(local_file_loc, remote_file_loc, keyname, is_dir=false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Copies a file to the Shadow node (head node) within AppScale. The caller
specifies the local file location, the destination where the file should be
placed, and the name of the key to use. The keyname is typically specified
by the Neptune job given, but defaults to
&#8217;&#8217;appscale&#8217;&#8217; if not provided.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>