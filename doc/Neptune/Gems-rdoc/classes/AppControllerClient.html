<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: AppControllerClient</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">AppControllerClient</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/app_controller_client_rb.html">
                lib/app_controller_client.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="Object.html">
                Object
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
A client that uses SOAP messages to communicate with the underlying cloud
platform (here, AppScale). This client is similar to that used in the
AppScale Tools, but with non-Neptune SOAP calls removed.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000014">compile_code</a>&nbsp;&nbsp;
      <a href="#M000012">get_acl</a>&nbsp;&nbsp;
      <a href="#M000011">get_output</a>&nbsp;&nbsp;
      <a href="#M000008">make_call</a>&nbsp;&nbsp;
      <a href="#M000007">new</a>&nbsp;&nbsp;
      <a href="#M000010">put_input</a>&nbsp;&nbsp;
      <a href="#M000013">set_acl</a>&nbsp;&nbsp;
      <a href="#M000009">start_neptune_job</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">conn</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">ip</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">secret</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000007" class="method-detail">
        <a name="M000007"></a>

        <div class="method-heading">
          <a href="AppControllerClient.src/M000007.html" target="Code" class="method-signature"
            onclick="popupCode('AppControllerClient.src/M000007.html');return false;">
          <span class="method-name">new</span><span class="method-args">(ip, secret)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
A constructor that requires both the IP address of the machine to
communicate with as well as the secret (string) needed to perform
communication. AppControllers will reject SOAP calls if this secret
(basically a password) is not present - it can be found in the user&#8216;s
.appscale directory, and a helper method is usually present to fetch this
for us.
</p>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000014" class="method-detail">
        <a name="M000014"></a>

        <div class="method-heading">
          <a href="AppControllerClient.src/M000014.html" target="Code" class="method-signature"
            onclick="popupCode('AppControllerClient.src/M000014.html');return false;">
          <span class="method-name">compile_code</span><span class="method-args">(job_data)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000012" class="method-detail">
        <a name="M000012"></a>

        <div class="method-heading">
          <a href="AppControllerClient.src/M000012.html" target="Code" class="method-signature"
            onclick="popupCode('AppControllerClient.src/M000012.html');return false;">
          <span class="method-name">get_acl</span><span class="method-args">(job_data)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the ACL associated with the named piece of data stored in the
underlying cloud platform. Right now, data can only be public or private,
but future versions will add individual user support. Input, output, and
exceptions mirror that of <a
href="AppControllerClient.html#M000009">start_neptune_job</a>.
</p>
        </div>
      </div>

      <div id="method-M000011" class="method-detail">
        <a name="M000011"></a>

        <div class="method-heading">
          <a href="AppControllerClient.src/M000011.html" target="Code" class="method-signature"
            onclick="popupCode('AppControllerClient.src/M000011.html');return false;">
          <span class="method-name">get_output</span><span class="method-args">(job_data)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Retrieves the output of a Neptune job, stored in an underlying database.
Within AppScale, a special application runs, referred to as the Repository,
which provides a key-value interface to Neptune job data. Data is stored as
though it were on a file system, therefore output be of the usual form
/folder/filename . Currently the contents of the file is returned as a
string to the caller, but as this may be inefficient for non-trivial output
jobs, the next version of Neptune will add an additional call to directly
copy the output to a file on the local filesystem. See <a
href="AppControllerClient.html#M000009">start_neptune_job</a> for
conditions by which this method can abort as well as the input format used
for job_data.
</p>
        </div>
      </div>

      <div id="method-M000008" class="method-detail">
        <a name="M000008"></a>

        <div class="method-heading">
          <a href="AppControllerClient.src/M000008.html" target="Code" class="method-signature"
            onclick="popupCode('AppControllerClient.src/M000008.html');return false;">
          <span class="method-name">make_call</span><span class="method-args">(time, retry_on_except) {|if block_given?| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
A helper method to make SOAP calls for us. This method is mainly here to
reduce code duplication: all SOAP calls expect a certain timeout and can
tolerate certain exceptions, so we consolidate this code into this method.
Here, the caller specifies the timeout for the SOAP call (or NO_TIMEOUT if
an infinite timeout is required) as well as whether the call should be
retried in the face of exceptions. Exceptions can occur if the machine is
not yet running or is too busy to handle the request, so these exceptions
are automatically retried regardless of the retry value. Typically callers
set this to false to catch &#8216;Connection Refused&#8217; exceptions or
the like. Finally, the caller must provide a block of code that indicates
the SOAP call to make: this is really all that differs between the calling
methods. The result of the block is returned to the caller.
</p>
        </div>
      </div>

      <div id="method-M000010" class="method-detail">
        <a name="M000010"></a>

        <div class="method-heading">
          <a href="AppControllerClient.src/M000010.html" target="Code" class="method-signature"
            onclick="popupCode('AppControllerClient.src/M000010.html');return false;">
          <span class="method-name">put_input</span><span class="method-args">(job_data)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Stores a file stored on the user&#8216;s local file system in the
underlying database. The user can specify to use either the underlying
database that AppScale is using, or alternative storage mechanisms (as of
writing, Google Storage, Amazon S3, and Eucalyptus Walrus are supported)
via the storage parameter.
</p>
        </div>
      </div>

      <div id="method-M000013" class="method-detail">
        <a name="M000013"></a>

        <div class="method-heading">
          <a href="AppControllerClient.src/M000013.html" target="Code" class="method-signature"
            onclick="popupCode('AppControllerClient.src/M000013.html');return false;">
          <span class="method-name">set_acl</span><span class="method-args">(job_data)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the ACL of a specified pieces of data stored in the underlying cloud
platform. As is the case with <a
href="AppControllerClient.html#M000012">get_acl</a>, ACLs can be either
public or private right now, but this will be expanded upon in the future.
As with the other SOAP calls, input, output, and exceptions mirror that of
<a href="AppControllerClient.html#M000009">start_neptune_job</a>.
</p>
        </div>
      </div>

      <div id="method-M000009" class="method-detail">
        <a name="M000009"></a>

        <div class="method-heading">
          <a href="AppControllerClient.src/M000009.html" target="Code" class="method-signature"
            onclick="popupCode('AppControllerClient.src/M000009.html');return false;">
          <span class="method-name">start_neptune_job</span><span class="method-args">(job_data)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Initiates the start of a Neptune job, whether it be a HPC job (MPI, X10, or
MapReduce), or a scaling job (e.g., for AppScale itself). This method
should not be used for retrieving the output of a job or getting / setting
output ACLs, but just for starting <a
href="AppControllerClient.html#M000007">new</a> HPC / scaling jobs. This
method takes a hash containing the parameters of the job to run, and can
abort if the AppController it calls returns an error (e.g., if a bad secret
is used or the machine isn&#8216;t running). Otherwise, the return value of
this method is the result returned from the AppController.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>