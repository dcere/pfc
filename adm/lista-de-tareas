- (X) Inventario de máquinas virtuales
- (X) Instalación de puppet
- (X) Actualización del script de instalación del tipo cloud (Debe instalarse en la MV neptune)
- (X) Actualización del script de validación de manifiesto para el tipo cloud (Debe instalarse en la MV neptune)
- (X) SSH
- (X) Verificación de mi parser de AppScale
- (X) Instalación de MCollective con plugin para facter
- (X) Ver dónde tiene que ir el servidor Stomp => En una máquina del cloud o en la máquina gestora. Prefiero en el cloud.
- (X) Comprobar que el proveedor cloudp puede usar archivos auxiliares (i.e. appscale-yaml.rb)
- Inicio de un cloud AppScale con un ordenador
  - (X) Control del fichero de descripcion de la MV
  - Control de errores al iniciar MV
- Inicio de un cloud AppScale con la configuración por defecto ( 1 + 3 ) => Control de las copias de la imagen
- Probar Neptune para coger salidas de trabajos
- (X) Envío de archivos (sin usar ssh o scp)
  - (X) MCollective => Como cadena, con Agente y Cliente RPC
  - (X) Puppet => Uso del atributo source (http://docs.puppetlabs.com/module_cheat_sheet.html). No lo vamos a usar
- (X) Configuración de Puppet
  - (X) Maestro en lucid-nep
    - http://www.puppetlogs.com/puppet/%23puppet-2010-11-06.log.html
    - http://comments.gmane.org/gmane.comp.sysutils.puppet.user/36578 (solución del bug)
  - (X) Agentes en lucid-app1 y lucid-app2
- (X) Servidor DNS  => DNSmasq
  - Estudiar el uso de nombres acortados (app1) en fichero dnsmasq.hosts frente a forzar el dominio en el fichero
    resolv.conf del cliente (domain cps.cloud)
  - (X) Comprobar resoluciones de dominio inversas
  - (X) Comprobar que AppScale sigue funcionando: master + open OK
- Asignación de IP concreta a la máquina virtual "por defecto"
  - Servidor DNS + DHCP => DNSmasq
    - http://tecnoloxiaxa.blogspot.com/2008/10/instalar-y-configurar-un-servidor-dns.html
    - http://www.guia-ubuntu.org/index.php?title=Dnsmasq%2C_servidor_DNS_y_DHCP
    - https://help.ubuntu.com/community/Dnsmasq
  - Configurar mediante Puppet => Especificar el contenido del fichero /etc/network/interfaces para cada máquina
- (X) Escribir como disminuir el tamaño de las imágenes de Ubuntu: caché apt, etc
- Comprobar uso de Custom facts para obtener información de AppScale
- (X) Comprobar uso de Puppet nodes para los nodos de AppScale
  - (X) Comprobar, en general, el uso de los tipos de Puppet para adaptarlos a los manifiestos
- (X) Comprobar ejecución de Puppet (nivel 2) desde MCollective => No lo vamos a usar
  - (X) Y también la ejecución de Puppet en modo "cron"
- (X) Comprobar estado de la propuesta => Aceptada
- (X) Uso de MCollective para ejecutar comandos de shell => Comandos sencillos como 'whoami', 'ls'
- (X) Uso de invoke-rc.d mcollecive stop en vez de service mcollecive stop en Debian / Ubuntu
  - (X) Si se inicia con /usr/sbin/service mcollecive start, se apaga con /usr/sbin/service mcollecive stop
- (X) Estudiar los ejemplos de Agentes y Clientes de RPC que proporciona MCollective
- (X) SSH de Puppet vs SSH de AppScale: ¿compatibles? => Parece que sí
- Plantillas ERB
  - (X) erb -x -T '-' mycloud-template.xml | ruby -c
  - carla
- (X) Load balancing => nginx
  - HAproxy: http://haproxy.1wt.eu/download/1.4/doc/configuration.txt
  - (X) nginx: http://spin.atomicobject.com/2012/02/28/load-balancing-and-reverse-proxying-with-nginx/
- (X) mysqld => Nombre del proceso es mysql, el ejecutable es /usr/sbin/mysqld (o /usr/bin/service mysql start)
- (X) nginxd? => /etc/init.d/nginx start | stop | restart
- (X) Instalación de Puppet en las lucid-web
  - (X) lucid-balancer
  - (X) lucid-server1
  - (X) lucid-server2
  - (X) lucid-database
- (X) Instalación de Expect en las lucid-web
  - (X) lucid-balancer
  - (X) lucid-server1
  - (X) lucid-server2
  - (X) lucid-database
- (X) Instalación de MCollective en las lucid-web
  - (X) lucid-balancer
  - (X) lucid-server1
  - (X) lucid-server2
  - (X) lucid-database
- (X) Instalación de MCollective en las appscale
  - (X) appscale-image0
  - (X) appscale-image1
- Instalación de appscale-tools en las appscale
  - appscale-image0
  - appscale-image1
- Estudiar el uso del parámetro "image_path" para facilitar la especificación de varias imágenes en "images"
- Puppet: rubygems de ubuntu (1.3.5) vs gem --version (1.8.21) ¿Como se especifica la última en un manifiesto Puppet?
- (X) Borrar definición de máquinas en virsh en lote: myvm* , cloud-app-* etc. ¿Se puede? => No
  - => Guardar los nombres de las máquinas definidas en un fichero para poder borrar su definición desde la función stop
- (X) Fichero (XML, YAML) de valores del cloud: numero de nodos, mapa función - IP, nodo líder, mapa id (leader) - IP, etc
  - (X) En vez de un unico fichero, varios: cloud-id, cloud-leader, cloud-last-id, cloud-last-mac, etc
  - (X) También los ficheros del manifiesto, y el manifiesto deben ser copiados: init-cloud.pp, ip_file.yaml, img_file.yaml
- ¿Creación de carpeta /tmp/cloud en la que poner los ficheros: fichero de configuración, cloud-id, cloud-leader, etc?
- (X) Definir como variables globales en el proveedor las rutas (y los nombres?) de estos ficheros
- Comprobar que las máquinas virtuales tienen correctamente:
  - Instalado MCollective
  - Instalados los clientes MCollective que vamos a usar: files, leader, cron
  - (X) El archivo /etc/mcollecive/server.cfg
  - (X) El archivo /etc/mcollecive/client.cfg
  - (X) Instalado expect => Necesitamos expect para comunicarnos con la MV. Es decir, debe estar instalado ANTES de ejecutar puppet apply init-cloud.pp
  - Configurada la clave /root/.ssh/id_rsa.pub
- (X) Si las MV ya estaban funcionando, ¿cómo sabemos qué dominios hay que parar y borrar su definición?
  - (X) No lo sabemos, pero a lo mejor no es muy sensato destruir esas máquinas si ya estaban encendidas de antes
- Asegurarse de que siempre hay un broker AMQP en el cloud
- (X) Asegurarse de iniciar mcollecive en las MVs
- (X) ¿Hace falta borrar los archivos del directorio /tmp de las MV? Si las vamos a apagar, no, pero en caso contrario sí
  - (X) Cliente MCollective
- (X) Comprobar que la generación de IDs es correcta cuando las máquinas virtuales han sido arrancadas a priori
- (X) Elección de líder: MCollective o codificación en LeaderElection
  - (X) MCollective para preguntarles a todos por su ID y enviarles el ID del líder a todos de vez
  - (X) LeaderElection para la gestión de IDs en tu propia máquina
- (X) Asignación de MACs a las MV. Fichero /etc/udev/rules.../70-...rules => script cloud-net-rules en /etc/init.d
- (X) Trabajos cron para Puppet
  - (X) Inicialización
  - (X) Terminación
- (X) Separación de proveedores
- (1/2) Inicio de AppScale desde Puppet con script expect: A veces sí, a veces no, depende de como lleve el día AppScale.
- (X) Comprobación de roles en AppScale
- (X) Ver como hace la distribucion de claves SSH appscale e imitarla.
- Distribuir claves SSH a las máquinas físicas también.
- Creación de un comando copy_remote_pm o similar para copiar ficheros a las máquinas físicas que alojan a las máquinas virtuales
- (X) ¿Es necesaria la clase VM_Name si generamos nombres aleatoriamente? => No.
- (X) Añadir el parámetro "starting MAC" o similar para evitar colisiones de MACs. => starting_mac_address
- Crear fichero para saber desde qué máquina se ha iniciado el cloud AppScale y poder realizar appscale-terminate-instances
- (X) Valores de retorno de las funciones de monitorización => Sin valores de retorno. Si hay un fallo se informa al usuario
  - (X) Fallo al aplicar el manifiesto basic.pp => Se le indica al usuario y se muestra la salida que dio puppet en la máquina
- Uso de monitorización antes del inicio del cloud?
- (X) El manifiesto de parada del cloud jobs requiere los ficheros de direcciones IP y de imágenes.
  - (X) Lo ponemos en el manifiesto
  - Al iniciar el cloud los copiamos a /tmp y nos aseguramos de que siempre estén en todas las máquinas
- Poner en la wiki / memoria el script set-db.sh y los scripts de SQL para configurar la BD
- Borrar los archivos del tipo cloud-mycloud-myvm-XXXX.xml de /cloud/
- (X) Poner el código de la elección de líder como un módulo más: cloudleader
- Descomentar la parte de autogestión de los proveedores!!!
- (X) Renombrar *jobs* por *torque*
- Mover los ficheros X_functions y X_yaml al directorio de Xp.rb y Xp_helper.rb
