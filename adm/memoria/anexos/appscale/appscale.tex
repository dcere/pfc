\chapter{AppScale}
\label{anx:appscale}

\section{Instalación}

Para instalar las Appscale tools se debe descargar el archivo \emph{tarball} de  \url{http://code.google.com/p/appscale/downloads/list}. Una vez descargado, se instala:

\begin{bashcode}
_: tar xzvf appscale-tools.tar.gz
_: cd appscale-tools
_: sudo bash debian/appscale_build.sh
...
AppScale tools installation completed successfully!
\end{bashcode}

Sin olvidarse de añadir el directorio de las appscale-tools a nuestro \emph{path}:

\begin{bashcode}
_: export PATH=${PATH}:/usr/local/appscale-tools/bin
\end{bashcode}
%% Put a $ to get back highlightning in gedit

Una vez instaladas las appscale-tools hay varias maneras de instalar AppScale. Para ello se recomienda leer la información disponible en \url{http://code.google.com/p/appscale/wiki/Getting_Started}. En este proyecto se ha creado una imagen propia en la que se ha instalado AppScale a través del repositorio. Estos pasos aparecen especificados en \url{http://code.google.com/p/appscale/wiki/ImageSetupViaBzr}.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Roles y despliegue}
\label{anx:appscale-roles}

A continuación se explica de manera más detallada los distintos roles de la arquitectura AppScale. \\

En primer lugar tenemos los roles simples:

\begin{description}
\item[\texttt{Shadow}]: Comprueba el estado en el que se encuentran el resto de nodos y se asegura de que están ejecutando los servicios que deben.
\item[\texttt{Load balancer}]: Servicio web que lleva a los usuarios a las aplicaciones. Posee también una página en la que informa del estado de todas las máquinas desplegadas.
\item[\texttt{AppEngine}]: Versión modificada de los SDKs de Google App Engine. Además de alojar las aplicaciones web añaden la capacidad de almacenar y recuperar datos de bases de datos que soporten la API de Google Datastore.
\item[\texttt{Database}]: Ejecuta los servicios necesarios para alojar a la base de datos elegida.
\item[\texttt{Login}]: La máquina principal que lleva a los usuarios a las aplicaciones App Engine. Difiere del Load Balancer en que esta es la única máquina desde la que se pueden hacer funciones administrativas. Puede haber muchas máquinas que hagan la función de Load Balancer pero sólo habrá una que haga función de Login.
\item[\texttt{Memcache}]: Proporciona soporte para almacenamiento en caché para las aplicaciones App Engine.
\item[\texttt{Zookeeper}]: Aloja los metadatos necesarios para hacer transacciones en las bases de datos.
\item[\texttt{Open}]: No ejecuta nada por defecto, pero está disponible en caso de que sea necesario. Estas máquinas son las utilizadas para ejecutar trabajos MPI.
\end{description}

Además de los roles simples también se proporcionan unos roles agregados que agrupan a varios de los roles simples y que facilitan la descripción de la arquitectura:

\begin{description}
\item[\texttt{Controller}]: Shadow, Load Balancer, Database, Login y Zookeeper.
\item[\texttt{Servers}]: App Engine, Database y Load Balancer.
\item[\texttt{Master}]: Shadow, Load Balancer y Zookeeper.
\end{description}

Estos roles pueden usarse en dos tipos de despliegue: por defecto y personalizado. En un despliegue por defecto únicamente se pueden usar los roles \texttt{Controller} y \texttt{Servers}. En un despliegue personalizado se usan el resto de roles.
